name: macOS Smoke Run

on:
  workflow_dispatch:

jobs:
  smoke-run:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - run: swift build -c release --product Stein
      - run: |
          BIN="$(swift build -c release --show-bin-path)/Stein"
          test -s "$BIN"
          "$BIN" --help || true
